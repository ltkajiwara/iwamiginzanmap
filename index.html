<!DOCTYPE html>
<html>
<head>
  <title>Iwami Area Map</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    #map { height: 100vh; width: 100vw; }

    .pano-btn {
      display: inline-block;
      margin-top: 12px;
      padding: 14px 24px;
      background: #0066cc;
      color: white;
      font-weight: bold;
      font-size: 16px;
      text-decoration: none;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .pano-btn:hover { background: #0055aa; }
  </style>
</head>
<body>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<script>
  const map = L.map('map').setView([35.108196956306735, 132.3999512741166], 13);

  // --- Base map layers ---
  const osm = L.tileLayer(
    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
    { attribution: '© OpenStreetMap contributors' }
  );
  
  const cartoLight = L.tileLayer(
    'https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png',
    { attribution: '&copy; OpenStreetMap & CARTO' }
  );

  const cartoDark = L.tileLayer(
    'https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png',
    { attribution: '&copy; OpenStreetMap & CARTO' }
  );

  const esriSatellite = L.tileLayer(
    "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",
    { attribution: "Tiles © Esri" }
  );

  // GSI orthophoto
  const gsiOrtho = L.tileLayer(
    'https://maps.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg',
    { attribution: '国土地理院（オルソ画像）' }
  );

  // GSI historic Meiji maps
  const gsiHistoric = L.tileLayer(
    'https://maps.gsi.go.jp/xyz/map52/{z}/{x}/{y}.png',
    { attribution: '国土地理院（迅速測図・歴史地図）' }
  );

  // GSI pale style vector-like map
  const gsiPale = L.tileLayer(
    'https://maps.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png',
    { attribution: '国土地理院' }
  );

  // Default layer
  osm.addTo(map);

  // Layer switcher
  L.control.layers({
    "OpenStreetMap (Default)": osm,
    "Vector (Carto Light)": cartoLight,
    "Vector (Carto Dark)": cartoDark,
    "Satellite (Esri World Imagery)": esriSatellite,
    "Satellite (GSI Japan Orthophoto)": gsiOrtho,
    "Historic (GSI Meiji Rapid Survey)": gsiHistoric,
    "Historic (GSI Pale Style)": gsiPale
  }).addTo(map);


  // ----------------------------------------
  // TEST 360° MARKER
  // ----------------------------------------
  L.marker([35.681236, 139.767125])
    .addTo(map)
    .bindPopup(`
      <h3>360° Panorama Test</h3>
      <img src="tokyo station.webp" width="300" style="border-radius:8px;"><br><br>
      <p>Click below for immersive full-screen 360° view</p>
      <iframe width="100%" height="320" frameborder="0"
        allow="xr-spatial-tracking; gyroscope; accelerometer"
        allowfullscreen scrolling="no"
        src="https://kuula.co/share/collection/7HHcf?logo=1&info=1&fs=1&vr=0&sd=1&thumbs=1">
      </iframe>
    `, { maxWidth: 400 })
    .bindTooltip("360° Test", {
      permanent: true,
      direction: "top",
      offset: [-15,-20]
    });

  // ----------------------------------------
  // ORIGINAL IWAMI GINZAN MARKERS
  // ----------------------------------------
  L.marker([35.0953231857212, 132.44456630308682]).addTo(map).bindPopup(`
    <h3>大久保間歩</h3>
    <img src="okubo mabo.png" width="250"><br>
    <p>石見銀山でも最大の坑道であった大久保間歩の一部を見学できます（2025年7月計測）</p>
    <a href="https://my.matterport.com/show/?m=horoqkThL2i" target="_blank">Matterportで見る</a>
  `).bindTooltip("大久保間歩", {permanent:true,direction:"top",offset:[-15,-20]});

  L.marker([35.105943422091485, 132.45192874794677]).addTo(map).bindPopup(`
    <h3>石見銀山世界遺産センター</h3>
    <img src="iwami whc.jpg" width="200"><br>
    <p>展示室内部を見学できます（2024年12月計測）</p>
    <a href="https://my.matterport.com/show/?m=5JKWdRLs41V" target="_blank">Matterportで見る</a>
  `).bindTooltip("石見銀山世界遺産センター", {permanent:true,direction:"top",offset:[-15,-20]});

  L.marker([35.09852345023761, 132.43903883075689]).addTo(map).bindPopup(`
    <h3>石銀地区</h3>
    <img src="1762525465.png" width="200"><br>
    <p>江戸時代の鉱山町「石銀地区」の一部を見学できます</p>
    <a href="https://my.matterport.com/show/?m=jruDkQ6CTAE" target="_blank">Matterportで見る</a>
  `).bindTooltip("石銀地区", {permanent:true,direction:"top",offset:[-15,-20]});

  L.marker([35.09960904790995, 132.43113267470957]).addTo(map).bindPopup(`
    <h3>栃畑谷（発掘調査地区）</h3>
    <img src="tochihatadani.png" width="200"><br>
    <p>江戸時代の製錬炉等が出土した発掘調査の現場を見学できます（2025年7月計測）</p>
    <a href="https://my.matterport.com/show/?m=FReiUj6kHRr" target="_blank">Matterportで見る</a>
  `).bindTooltip("栃畑谷", {permanent:true,direction:"top",offset:[-15,-20]});

  L.marker([35.10540710829342, 132.43918545452155]).addTo(map).bindPopup(`
    <h3>清水谷精錬所跡</h3>
    <img src="shimizudani.png" width="200"><br>
    <p>明治時代に造られた精錬所の遺跡を見学できます（2025年7月計測）</p>
    <a href="https://my.matterport.com/show/?m=E6tRvmru3P5" target="_blank">Matterportで見る</a>
  `).bindTooltip("清水谷精錬所跡", {permanent:true,direction:"top",offset:[-15,-20]});

  L.marker([35.115349488774065, 132.44588041268344]).addTo(map).bindPopup(`
    <h3>伝建地区「大森町」</h3>
    <img src="omoricho.jpg" width="200"><br>
    <p>江戸時代の街並みの一部を見学できます（2024年12月計測）</p>
  `).bindTooltip("大森町", {permanent:true,direction:"top",offset:[-15,-20]});

  L.marker([35.095985785248146, 132.347967808941]).addTo(map).bindPopup(`
    <h3>伝建地区「温泉津」</h3>
    <img src="yunotsu.png" width="200"><br>
    <p>石見銀山の外港として発展した港町「温泉津」の街並みを見学できます（2025年7月計測）</p>
  `).bindTooltip("温泉津", {permanent:true,direction:"top",offset:[-15,-20]});

  L.marker([35.0950735, 132.4448869]).addTo(map).bindPopup(`
    <h3>釜屋間歩</h3>
    <img src="kamaya.png" width="200"><br>
    <p>釜屋間歩の遺構を見学できます（2025年7月計測）</p>
    <a href="https://my.matterport.com/show/?m=zGnuNLD4WJu" target="_blank">Matterportで見る</a>
  `).bindTooltip("釜屋間歩", {permanent:true,direction:"top",offset:[-15,-20]});

</script>
</body>
</html>



